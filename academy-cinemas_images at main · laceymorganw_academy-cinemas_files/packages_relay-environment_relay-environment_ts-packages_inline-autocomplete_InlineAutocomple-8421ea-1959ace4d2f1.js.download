"use strict";(globalThis.webpackChunk_github_ui_github_ui=globalThis.webpackChunk_github_ui_github_ui||[]).push([["packages_relay-environment_relay-environment_ts-packages_inline-autocomplete_InlineAutocomple-8421ea"],{11418:(e,t,r)=>{let n;r.d(t,{H:()=>O});var s=r(35750),i=r(18150),a=r(85242),o=r(88243),l=r(16213),u=r(10204),c=new WeakMap,d=new WeakSet;let AliveSession=class AliveSession extends u.ib{constructor(e,t,r,n,s){super(e,()=>(0,o._)(this,d,h).call(this),r,n,void 0,s),(0,l._)(this,d),(0,i._)(this,c,{writable:!0,value:void 0}),(0,a._)(this,c,t)}};function h(){return p((0,s._)(this,c))}async function p(e){let t=await f(e);return t&&t.url&&t.token?g(t.url,t.token):null}async function f(e){let t=await fetch(e,{headers:{Accept:"application/json"}});if(t.ok)return t.json();if(404===t.status)return null;throw Error("fetch error")}async function g(e,t){let r=await fetch(e,{method:"POST",mode:"same-origin",headers:{"Scoped-CSRF-Token":t}});if(r.ok)return r.text();throw Error("fetch error")}var m=r(70170),b=r(34095),w=r(82075),y=r(23683),v=r(69599);function _(e,{channel:t,type:r,data:n}){for(let s of e)s.dispatchEvent(new CustomEvent(`socket:${r}`,{bubbles:!1,cancelable:!1,detail:{name:t,data:n}}))}var S=new WeakMap,k=new WeakMap,x=new WeakMap,E=new WeakMap,A=new WeakMap,N=new WeakSet;let T=class AliveSessionProxy{subscribe(e){let t=(0,s._)(this,k).add(...e);t.length&&(0,s._)(this,S).port.postMessage({subscribe:t});let r=new Set(t.map(e=>e.name)),n=e.reduce((e,t)=>{let n=t.topic.name;return(0,u.JR)(n)&&!r.has(n)&&e.add(n),e},new Set);n.size&&(0,s._)(this,S).port.postMessage({requestPresence:Array.from(n)})}unsubscribeAll(...e){let t=(0,s._)(this,k).drain(...e);t.length&&(0,s._)(this,S).port.postMessage({unsubscribe:t});let r=(0,s._)(this,x).removeSubscribers(e);this.sendPresenceMetadataUpdate(r)}updatePresenceMetadata(e){let t=new Set;for(let r of e)(0,s._)(this,x).setMetadata(r),t.add(r.channelName);this.sendPresenceMetadataUpdate(t)}sendPresenceMetadataUpdate(e){if(!e.size)return;let t=[];for(let r of e)t.push({channelName:r,metadata:(0,s._)(this,x).getChannelMetadata(r)});(0,s._)(this,S).port.postMessage({updatePresenceMetadata:t})}online(){(0,s._)(this,S).port.postMessage({online:!0})}offline(){(0,s._)(this,S).port.postMessage({online:!1})}hangup(){(0,s._)(this,S).port.postMessage({hangup:!0})}constructor(e,t,r,n,c,d){(0,l._)(this,N),(0,i._)(this,S,{writable:!0,value:void 0}),(0,i._)(this,k,{writable:!0,value:new u.m0}),(0,i._)(this,x,{writable:!0,value:new u.VH}),(0,i._)(this,E,{writable:!0,value:void 0}),(0,i._)(this,A,{writable:!0,value:new Map}),(0,a._)(this,E,c),(0,a._)(this,S,new SharedWorker(`${e}?module=true`,{name:`github-socket-worker-v3-${n}`,type:"module"})),(0,s._)(this,S).port.onmessage=({data:e})=>(0,o._)(this,N,C).call(this,e),(0,s._)(this,S).port.postMessage({connect:{url:t,refreshUrl:r,options:d}})}};function C(e){let{channel:t}=e;if("presence"===e.type){let r=(0,s._)(this,A).get(t);r||(r=(0,m.s)((e,r)=>{(0,s._)(this,E).call(this,e,r),(0,s._)(this,A).delete(t)},100),(0,s._)(this,A).set(t,r)),r((0,s._)(this,k).subscribers(t),e);return}(0,s._)(this,E).call(this,(0,s._)(this,k).subscribers(t),e)}async function P(){let e=function(){let e=document.head.querySelector("link[rel=shared-web-socket-src]")?.getAttribute("href");return e&&e.startsWith("/")?e:null}();if(!e)return;let t=document.head.querySelector("link[rel=shared-web-socket]")?.href??null;if(!t)return;let r=document.head.querySelector("link[rel=shared-web-socket]")?.getAttribute("data-refresh-url")??null;if(!r)return;let n=document.head.querySelector("link[rel=shared-web-socket]")?.getAttribute("data-session-id")??null;if(!n)return;let s=(()=>{let s=(0,v.G7)("alive_legacy_retries")?{socketPolicy:{timeout:4e3,attempts:7}}:{};if(!(0,y.nr)()&&"SharedWorker"in window&&"true"!==(0,w.A)("localStorage").getItem("bypassSharedWorker"))try{return new T(e,t,r,n,_,s)}catch{}return new AliveSession(t,r,!1,_,s)})();return window.addEventListener("online",()=>s.online()),window.addEventListener("offline",()=>s.offline()),window.addEventListener("pagehide",()=>{"hangup"in s&&s.hangup()}),s}async function I(){return await b.G,P()}function O(){return n||(n=I())}},73056:(e,t,r)=>{r.d(t,{$:()=>a});var n=r(10204),s=r(33303);let i=new WeakMap;function a(e,t,r){let a;if(!e)throw Error("Not connected to alive");if(!t)throw Error("No channel name");let o=n.KK.parse(t);if(!o)throw Error("Invalid channel name");let l={subscriber:{dispatchEvent:e=>{e instanceof CustomEvent&&r(e.detail.data)}},topic:o},u=((a=i.get(e))||(a={subscribe:(0,s.rK)(t=>e.subscribe(t.flat())),unsubscribeAll:(0,s.rK)(t=>e.unsubscribeAll(...t))},i.set(e,a)),a);return u.subscribe([l]),{unsubscribe:()=>u.unsubscribeAll(l.subscriber)}}},33303:(e,t,r)=>{function n(){return Promise.resolve()}function s(){return new Promise(window.requestAnimationFrame)}async function i(e,t){let r,n=new Promise(t=>{r=self.setTimeout(t,e)});if(!t)return n;try{var s;await Promise.race([n,(s=t,new Promise((e,t)=>{let r=Error("aborted");r.name="AbortError",s.aborted?t(r):s.addEventListener("abort",()=>t(r))}))])}catch(e){throw self.clearTimeout(r),e}}function a(e){let t=[];return function(r){t.push(r),1===t.length&&queueMicrotask(()=>{let r=t.slice(0);t.length=0,e(r)})}}r.d(t,{G$:()=>s,k2:()=>n,rK:()=>a,uk:()=>i})},37285:(e,t,r)=>{r.d(t,{Av:()=>o,BM:()=>s,Gr:()=>l,HX:()=>d,M_:()=>h,RD:()=>c,rb:()=>i});var n=r(71315);let s="GraphQLTraces",i="GraphQLTracingRefresh",a=decodeURIComponent(new URLSearchParams(n.fV.search).get("disable_clusters")||"").split(",").filter(e=>""!==e);function o(e){if(!n.cg||!l()||!e)return;let t=n.cg;t&&!t[s]&&(t[s]=[]),t&&e.__trace&&(t[s].push(e.__trace),"function"==typeof t[i]&&t[i]())}function l(){let e=n.cg;return"true"===new URLSearchParams(n.fV.search).get("_tracing")||e&&void 0!==e[s]}function u(){return a.length>0}function c(e){if(!l()&&!u())return e;let t=new URL(e,n.fV.origin);return l()&&t.searchParams.set("_tracing","true"),u()&&t.searchParams.set("disable_clusters",a.join(",")),t.pathname+t.search}function d(e){return a.indexOf(e)>-1}function h(e){let t=a.indexOf(e);t>-1?a.splice(t,1):a.push(e);let r=new URLSearchParams(n.fV.search);r.set("disable_clusters",a.join(",")),n.fV.search=r.toString()}},30721:(e,t,r)=>{r.d(t,{VB:()=>SSRNetwork,SD:()=>T,E7:()=>N});var n=r(50467),s=r(40961),i=r(69487),a=r(37285),o=r(96379),l=r(71315),u=r(38102);let c=["SAML","SERVICE_UNAVAILABLE"],d={FORBIDDEN:["SAML error"],AUTHENTICATION:["Couldn\u2019t authenticate you"]},h={NOT_FOUND:[["repository","issue"]]};var p=r(51987);function f(e,t){let r=h[e];if(!r)return!1;for(let e of r){if(t.length!==e.length)continue;let r=!0;for(let n=0;n<t.length;n++)if(t[n]!==e[n]&&"*"!==e[n]){r=!1;break}if(r)return!1}return!0}let g=class ValidationError extends Error{constructor(e,t,r){super(e,t),(0,n._)(this,"catalogService",void 0),this.catalogService=r,this.name="ValidationError"}};async function m(e,t,r){if(e.status>401&&404!==e.status){let n=await e.text(),s={url:e.url,timestamp:new Date().toISOString(),persistedQueryId:t,persistedQueryName:r,failureRequestId:e.headers.get("X-Github-Request-Id")},i=`HTTP error (${e.status}): ${n||"No additional text"}.
    Error Info: ${JSON.stringify(s)}`;if(429===e.status)throw{message:i,cause:e.status};throw Error(i,{cause:e.status})}}async function b(e,t,r,n="GET",s,i,a,o){return(await w(e,t,r,n,{isSubscription:!1,scope:void 0},s,i,a,o)).response}async function w(e,t,r,n="POST",s={},o,h,p,m){let b=JSON.stringify((0,i.stableCopy)({query:e,variables:r,...s.scopeObject?{scopeObject:s.scopeObject}:{}})),{isSubscription:v,scope:_,subscriptionTopic:S,dispatchTime:k}=s,x=function(e,t,r,n,s,i,a="/_graphql"){let o=[];if("GET"===e&&o.push(`body=${t}`),r&&o.push("subscription=1"),s&&o.push(`scope=${encodeURIComponent(s)}`),n&&o.push(`subscriptionTopic=${encodeURIComponent(n)}`),i&&o.push(`dispatchTime=${encodeURIComponent(i)}`),l.cg){let e=new URL(l.cg.location.href,l.cg.location.origin).searchParams.get("_features");e&&o.push(`_features=${e}`)}return o.length>0?`${a}?${o.join("&")}`:a}(n,encodeURIComponent(b),v,S,_,k,o),E=null;try{let{subscriptionId:r,requestId:s,json:i,status:o}=await y(x,n,e,t,b,h);if(E=r,p&&i.errors){let e=p[o];if(e)for(let r of i.errors){let n=e[r.type];n?.({persistedQueryName:t,errorMessage:r.message})}}let l=function(e,t,r,n){var s,i;if(s=t,i=e,"errors"in i&&(i.errors.filter(e=>{let t=c.includes(e.type)||!!d[e.type]?.includes(e.message),r=f(e.type,e.path);return t||r}).map(e=>{console.error(`Failed to fetch data. Please use this request ID when contacting support: ${s} Error: ${e.type}: ${e.message} (path: ${e.path})`)}),i.errors=i.errors.filter(e=>{let t=c.includes(e.type)||!!d[e.type]?.includes(e.message),r=f(e.type,e.path);return!t&&!r})),"errors"in e&&e.errors.length){let t=e.errors.map(e=>`GraphQL error: ${e.type}: ${e.message} (path: ${e.path})`).join(", "),s=new g(`${t} (Persisted query id: ${r})`,{cause:e.errors},e.extensions?.query_owning_catalog_service);if(n)(0,u.N7)(s),n.error(s);else throw s}if(!("data"in e)){let s=Error(`Expected data property in response: ${JSON.stringify(e)}. persistedQueryId: ${r}, requestId: ${t}`);if(n)(0,u.N7)(s),n.error(s);else throw s}return e}(i,s,e,m);return l&&(0,a.Av)(l),{subscriptionId:E,response:l}}catch(e){if(m)return"object"==typeof e&&null!==e&&"cause"in e&&429===e.cause||(0,u.N7)(e),m.error(e),{subscriptionId:E,response:{errors:[{message:"An error occurred while fetching data. Please try again later."}],extensions:{}}};throw e}}async function y(e,t,r,n,s,i){return v((0,a.RD)(e),t,r,n,s,i)}async function v(e,t,r,n,s,i){let a,l,c={...(0,p.kt)()};i?.issues_react_perf_test&&(c["X-LUC-Environment"]="issues");let d=(a="GET"===t?await fetch(e,{method:t,cache:"no-cache",credentials:"include",headers:{Accept:"application/json",...c}}):await (0,o.DI)(e,{method:t,headers:{Accept:"application/json",...c},...s?{body:s}:void 0})).headers.get("X-Subscription-ID"),h=a.headers.get("X-Github-Request-Id")||"",f=a.status;await m(a,r,n);try{l=await a.json()}catch(r){let t={error:r,status:f,url:e,requestId:h};throw(0,u.N7)(Error(`Failed to parse server JSON response ${JSON.stringify(t)}`)),Error(`Failed to parse server response. Please try again later. ${JSON.stringify(t)}`)}return{subscriptionId:d,requestId:h,json:l,status:f}}let _=[{kind:"linked",handle(e,t,r){if(null!=t&&t.getType()===i.ROOT_TYPE&&"node"===e.name&&r.hasOwnProperty("id"))return r.id}},{kind:"pluralLinked",handle(e,t,r){if(null!=t&&t.getType()===i.ROOT_TYPE&&"nodes"===e.name&&r.hasOwnProperty("ids"))return r.ids}}];var S=r(11418),k=r(73056),x=r(69982);function E(e){return(0,x.unstable_scheduleCallback)(x.unstable_LowPriority,e)}let A={cancel:()=>!1,schedule:e=>((0,s.unstable_batchedUpdates)(e),"")};let SSRNetwork=class SSRNetwork{execute(e,t,r){return this.relayNetwork.execute(e,t,r)}getPreloadedSubscriptions(){return this.preloadedSubscriptions}constructor(e,t={},r,s,a,o){(0,n._)(this,"relayNetwork",void 0),(0,n._)(this,"ssrPreloadedData",void 0),(0,n._)(this,"preloadedSubscriptions",void 0),(0,n._)(this,"warningsShown",void 0),(0,n._)(this,"enabled_features",void 0),(0,n._)(this,"maxAge",void 0),(0,n._)(this,"errorCallbacks",void 0),this.ssrPreloadedData=e,this.enabled_features=t,this.preloadedSubscriptions=r,this.warningsShown=new Set,this.maxAge=a,this.errorCallbacks=o,this.relayNetwork=i.Network.create((e,t)=>i.Observable.create(r=>{let n=function({params:e,variables:t,ssrPreloadedQueries:r,baseUrl:n,emitWarning:s,enabledFeatures:i,maxAge:a,errorCallbacks:o,observer:u}){if(!e.id)throw Error("params has no id property!");if(e.id&&r){let n=JSON.stringify(t),s=r.get(e.id)?.get(n),i=Math.floor(Date.now()/1e3),o=s?.timestamp;if(s&&(u.next(s),!(a&&o&&i>o+a)))return void u.complete();e.metadata?.isRelayRouteRequest&&(0,l.g5)()}let c="mutation"===e.operationKind?"POST":"GET";if(l.KJ)return b(e.id,e.name,t,c,n,i,o,u)}({params:e,variables:t,ssrPreloadedQueries:this.ssrPreloadedData,baseUrl:s,emitWarning:e=>{this.warningsShown.has(e)||(this.warningsShown.add(e),console.warn(e))},enabledFeatures:this.enabled_features,maxAge:a,errorCallbacks:this.errorCallbacks,observer:r});n instanceof Promise&&n.then(e=>{if(!Array.isArray(e)&&"extensions"in e&&e.extensions&&e.extensions.subscriptions){let t=e.extensions.subscriptions;for(let e in t)for(let r in this.preloadedSubscriptions.has(e)||this.preloadedSubscriptions.set(e,new Map),t[e])this.preloadedSubscriptions.get(e)?.set(r,t[e][r])}r.next(e),r.complete()})}),(e,t)=>(function(e,t,r=new Map){let n=e.id,s=e.name;return i.Observable.create(i=>{let a=()=>{},o=!1;return async function(){if(!n)throw Error("unexpected operation with no id!");let l=e.metadata?.scope,c=function(e,t,r,n){let s=n.get(e);if(s)e:for(let[e,n]of s){for(let[n,s]of Object.entries(JSON.parse(e)))if("$scope"===n&&r!==s||t[n]!==s)continue e;return n}}(n,t,l,r),d=null;if(c)d=c.subscriptionId,c.response&&i.next(c.response);else try{let e=await w(n,s,t,"GET",{isSubscription:!0,scope:l});d=e.subscriptionId,e.response&&i.next(e.response)}catch(e){if(e instanceof Error&&e.message.includes("Subscription halted"))return;throw e}try{let e=await (0,S.H)();if(o)return;let r=(0,k.$)(e,d,async({scope_object:e,subscription_topic:r,dispatch_time:a})=>{try{let{response:o}=await w(n,s,{...t},"GET",{isSubscription:!0,scopeObject:e,subscriptionTopic:r,dispatchTime:a,scope:l});o&&i.next(o)}catch(e){(0,u.N7)(e,{message:`Error in fetching update for ${n} with variables ${JSON.stringify(t)}`})}});r?.unsubscribe&&(a=r.unsubscribe)}catch(e){i.error(e)}}(),{get closed(){return o},unsubscribe(){o=!0,a()}}})})(e,t,this.preloadedSubscriptions))}};let N=(e,t)=>{let r=new SSRNetwork(new Map,{},new Map,e,void 0,t),n=new i.Environment({scheduler:A,store:new i.Store(new i.RecordSource,{gcReleaseBufferSize:50,queryCacheExpirationTime:3e5,gcScheduler:E}),getDataID:(e,t)=>{if("Viewer"===t)return null==e.id?(0,i.generateClientID)("client:root","viewer"):e.id;if("ProjectV2SingleSelectFieldOption"===t){let t=[];return e.id&&t.push(e.id),e.name&&t.push(e.name),e.color&&t.push(e.color),e.description&&t.push(function(e){let t=0;if(0===e.length)return t;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r)|0;return t}(e.description)),t.join("_")}return e.id},network:r,missingFieldHandlers:_});return n.options={baseUrl:e,getPreloadedSubscriptions:()=>r.getPreloadedSubscriptions()},n};function T({environment:e,query:t,variables:r={}}){let n=(0,i.getRequest)(t),s=(0,i.createOperationDescriptor)(n,r);return e.retain(s),(0,i.fetchQuery)(e,t,r,{fetchPolicy:"store-or-network"})}},8625:(e,t,r)=>{r.d(t,{H:()=>s});var n=r(96540);let s=({inputRef:e,fallbackEventHandler:t})=>(0,n.useCallback)((r,n,s)=>{let i=e.current;if(!i)return;let a=document.activeElement;i.focus();let o=n??[i.selectionStart??i.value.length,i.selectionEnd??i.value.length],l=void 0===s?((e,t,r)=>{let n=t[1]-t[0];return e<t[0]?e:e<t[1]?t[0]+r:e+(r-n)})(i.selectionStart??i.value.length,o,r.length):Array.isArray(s)?s[0]:s,u=Array.isArray(s)?s[1]:l,c=!1;try{if(document.activeElement!==i)throw Error("Input must be focused to use execCommand");i.setSelectionRange(o[0],o[1]),c=""===r?document.execCommand("delete",!1):document.execCommand("insertText",!1,r),i.setSelectionRange(l,u)}catch{c=!1}if((a instanceof HTMLInputElement||a instanceof HTMLTextAreaElement)&&a.focus(),!c){let n=i.value.slice(0,o[0])+r+i.value.slice(o[1]),s=new InputEvent("input",{bubbles:!1});e.current.value=n,e.current.setSelectionRange(l,u),e.current.dispatchEvent(s),t(((e,t)=>({...e,nativeEvent:e,target:t,currentTarget:t,preventDefault:()=>e.preventDefault(),isDefaultPrevented:()=>e.defaultPrevented,isPropagationStopped:()=>!1,persist:()=>({})}))(s,e.current))}},[e,t])},71555:(e,t,r)=>{r.d(t,{a:()=>P});var n=r(74848),s=r(70170),i=r(71315),a=r(83494),o=r(8625),l=r(74021),u=r(64515),c=r(16255),d=r(34164),h=r(24249),p=r(96540),f=r(52446),g=r(45221),m=r(35181),b=r(19342);let w={Overlay_0:"AutocompleteSuggestions-module__Overlay_0--LMGK_",suggestion:"AutocompleteSuggestions-module__suggestion--ted1j",ActionList_0:"AutocompleteSuggestions-module__ActionList_0--iXEKc"},y=new Set([" ",`
`]),v=new Set([".",`
`]),_=e=>"string"==typeof e?e:e.value,S=e=>"string"==typeof e?e:null===e.value?e.key:e.key??e.value,k=(...e)=>t=>{for(let r of[...e].reverse())t.isDefaultPrevented()||r?.(t)},x=()=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(f.l.Item,{disabled:!0,children:(0,n.jsx)(b.r,{})}),(0,n.jsx)(f.l.Item,{disabled:!0,children:(0,n.jsx)(b.r,{})}),(0,n.jsx)(f.l.Item,{disabled:!0,children:(0,n.jsx)(b.r,{})})]}),E=({suggestion:e,onSelect:t,isActive:r,id:s,parentRole:i})=>{let a={id:s,children:_(e),role:"menu"===i?"menuitem":"option",active:r,className:w.suggestion,"aria-selected":"listbox"===i&&!!r||void 0,onMouseDown:e=>{e.preventDefault(),t()}};return"string"==typeof e?(0,n.jsx)(f.l.Item,{...a}):e.render(a)},A=({suggestions:e,portalName:t,triggerCharCoords:r,onClose:s,onCommit:i,inputRef:a,visible:o,defaultPlacement:l,activeSuggestion:u,getSuggestionId:c,id:d,menuTitle:h,role:b})=>{let y=(0,p.useRef)(null),[v,_]=(0,p.useState)(0),[k,A]=(0,p.useState)("auto");(0,g.A)(function(){A("auto");let e=y.current?.offsetHeight??0,t=r.top+r.height,n=t+e>window.innerHeight,s=r.top-e,i=s<0,a={below:n&&!i?s:t,above:i&&!n?t:s}[l];if(Number.isNaN(a)&&(a=0),_(Math.max(0,a)),n&&i){let e="above"===l?window.innerHeight+a:window.innerHeight-a;A(`${e}px`)}},[r.top,r.height,e,o,l]);let N=(0,n.jsx)(n.Fragment,{children:"loading"===e?(0,n.jsx)(x,{}):e?.map(e=>(0,n.jsx)(E,{suggestion:e,id:c(e),onSelect:()=>i(e),isActive:u===e,parentRole:b},S(e)))}),T=(0,p.useId)();return o?(0,n.jsx)(m.Ay,{onEscape:s,onClickOutside:s,returnFocusRef:a,preventFocusOnOpen:!0,portalContainerName:t,top:v,left:r.left,ref:y,className:w.Overlay_0,children:(0,n.jsx)(f.l,{role:b,id:d,"aria-label":h?void 0:"Autocomplete suggestions","aria-labelledby":h?T:void 0,className:w.ActionList_0,style:{height:k},children:h?(0,n.jsxs)(f.l.Group,{children:[(0,n.jsx)(f.l.GroupHeading,{id:T,children:h}),N]}):N})}):(0,n.jsx)(n.Fragment,{})};try{x.displayName||(x.displayName="LoadingIndicator")}catch{}try{E.displayName||(E.displayName="SuggestionListItem")}catch{}try{A.displayName||(A.displayName="AutocompleteSuggestions")}catch{}let N={container:"InlineAutocomplete-module__container--lzMAk",fullWidth:"InlineAutocomplete-module__fullWidth--xhTmc"},T=e=>{try{return e.selectionStart}catch(e){if(e instanceof TypeError)return null;throw e}},C=()=>{},P=({triggers:e,suggestions:t,onShowSuggestions:r,onHideSuggestions:f,onSelectSuggestion:g,style:m,children:b,tabInsertsSuggestions:w=!1,suggestionsPlacement:x="below",portalName:E,fullWidth:P=!1,title:I,asMenu:O,...$})=>{let[,j]=(0,p.useState)(0),M=(0,l.Lf)($),R=(0,p.useRef)(null);(0,u.T)(b.ref??C,R);let L=function(e,t){if(p.Children.only(e),t.current&&!(t.current instanceof HTMLInputElement)&&!(t.current instanceof HTMLTextAreaElement))throw TypeError("AutocompleteTextarea child must be a component that forwards a ref and props to an <input> or <textarea> element.");return e}(b,R),D=(0,o.H)({inputRef:R,fallbackEventHandler:L.props.onChange??C}),q=(0,p.useRef)(null),W=null!==t&&t.length>0,[G,H]=(0,p.useState)(),F=Array.isArray(t)?t.find(e=>S(e)===G)??t[0]:void 0;G&&!W&&H(void 0),(0,p.useEffect)(()=>{if(W){let e=(0,s.n)(()=>j(e=>e+1),100);return document.addEventListener("scroll",e,{capture:!0}),()=>{document.removeEventListener("scroll",e,{capture:!0})}}},[W]);let U=R.current&&q.current&&W?new h.Qr(R.current,(T(R.current)??0)-q.current.query.length).getBoundingClientRect():{top:0,left:0,height:0},V=e=>{if(!F||!Array.isArray(t))return;let r=e=>{H(e?S(e):void 0)};switch(e){case"up":r(t[t.indexOf(F)-1]??t.at(-1));break;case"down":r(t[t.indexOf(F)+1]??t[0]);break;case"start":r(t[0]);break;case"end":r(t.at(-1))}},J=(e=F)=>{if(!e)return;let t=(e=>"object"==typeof e&&null===e.value)(e),r=_(e)??"";if(!R.current||!q.current)return;let{query:n,trigger:s}=q.current,i=T(R.current)??0,a=n.length+s.triggerChar.length,o=i-a,l=t||(s.keepTriggerCharOnCommit??!0)?s.triggerChar:"",u=!t&&(s.insertSpaceOnCommit??!0),c=`${l}${r}${u?" ":""}`;f(),D(c,[o,o+a]),g?.({suggestion:e,trigger:s,query:n,target:R.current})},K=(0,p.useId)(),B=e=>`${K}-${S(e)}`,Q=!O,X=(0,p.cloneElement)(L,{...M,onBlur:k(L.props.onBlur,()=>{f()}),onKeyDownCapture:k(L.props.onKeyDownCapture,e=>{if(W)switch(e.key){case"ArrowRight":case"ArrowLeft":f();break;case"Tab":w||f()}}),onChange:k(L.props.onChange,t=>{let n=T(t.currentTarget);if(null===n)return void f();let s=((e,t,r)=>{let n=e.sort((e,t)=>t.triggerChar.length-e.triggerChar.length);for(let e=r-1,s="",i=n;e>=0&&i.length>0;e--){let r=t[e]??"";for(let n of(s=r+s,y.has(r)&&(i=i.filter(e=>e.multiWord)),v.has(r)&&(i=i.filter(e=>!e.multiWord)),i.filter(e=>s.startsWith(e.triggerChar)))){let r=t[e-1]??"",a=s[1]??"";if((!r||/[\s([]/.test(r))&&(!a||!/\s/.test(a)))return{trigger:n,query:s.slice(n.triggerChar.length)};i=i.filter(e=>e!==n)}}return null})(e,t.currentTarget.value,n);q.current=s&&{...s,target:t.currentTarget},q.current?r(q.current):f()}),ref:R,role:W&&Q?"combobox":L.props.role,"aria-expanded":W&&Q?"true":L.props["aria-expanded"],"aria-activedescendant":F?B(F):L.props["aria-activedescendant"],"aria-controls":W&&Q?K:L.props["aria-controls"],"aria-owns":W&&O?K:L.props["aria-owns"],"aria-autocomplete":W&&Q?"list":L.props["aria-autocomplete"],"aria-haspopup":W&&Q?"listbox":L.props["aria-haspopup"]}),z=W?"loading"===t?"Loading autocomplete suggestions\u2026":Q?`${t.length} autocomplete ${1===t.length?"suggestion":"suggestions"} available; "${_(t[0])}" is highlighted. Press ${w?"Enter or Tab":"Enter"} to select.`:"":"";return(0,n.jsxs)(a.tL,{commands:W?{"github:cancel":()=>f(),"github:select":()=>J(),"github:focus-next":w?()=>J():void 0,"github:down":()=>V("down"),"github:up":()=>V("up"),"github:go-to-start":()=>V("start"),"github:go-to-end":()=>V("end")}:{},className:(0,d.$)(N.container,P&&N.fullWidth),style:m,children:[X,i.KJ&&(0,n.jsx)(A,{id:K,suggestions:t,inputRef:R,onCommit:J,onClose:f,triggerCharCoords:U,visible:W,defaultPlacement:x,portalName:E,activeSuggestion:F,getSuggestionId:B,menuTitle:I,role:O?"menu":"listbox"}),i.KJ&&(0,n.jsx)(c.Z,{children:(0,n.jsx)("span",{"aria-live":"assertive","aria-atomic":!0,style:{clipPath:"circle(0)",position:"absolute"},children:z})})]})};try{P.displayName||(P.displayName="InlineAutocomplete")}catch{}},10242:(e,t,r)=>{r.d(t,{A:()=>a});var n=r(74848),s=r(81246);let i={link:"FeedbackLink-module__link--Ga4DP"},a=({feedbackUrl:e})=>(0,n.jsx)(s.A,{className:i.link,href:e,children:"Give feedback"});try{a.displayName||(a.displayName="FeedbackLink")}catch{}},84174:(e,t,r)=>{r.d(t,{V:()=>i});var n=r(74848),s=r(46309);let i=({label:e,link:t,className:r})=>t?(0,n.jsxs)(s.B,{direction:"horizontal",gap:"condensed",align:"baseline",className:r,children:[e," ",t]}):r?(0,n.jsx)("span",{className:r,children:e}):(0,n.jsx)(n.Fragment,{children:e});try{i.displayName||(i.displayName="LabelWithLink")}catch{}}}]);
//# sourceMappingURL=packages_relay-environment_relay-environment_ts-packages_inline-autocomplete_InlineAutocomple-8421ea-d9732f54d169.js.map